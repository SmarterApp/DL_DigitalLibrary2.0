<article id="main" class="results-container">
  <h6 *ngIf="allResults" class="results-header">Found {{ allResults.length }}
    <span [ngPlural]="allResults.length" >
      <ng-template ngPluralCase="=1">Resource</ng-template>
      <ng-template ngPluralCase="other">Resources</ng-template>
    </span>
  </h6>
  <sbdl-search
    [filters]="filters"
    [showAdvanced]="showAdvancedFiltersInitially"
    showingResults="true"
  ></sbdl-search>
  <section class="search-results" width="120px" height="120px">
    <a #searchResult [routerLink]="['/resource', result.id]" *ngFor="let result of renderedResults" class="search-result">
      <div class="summary-content">
        <div class="resource-type">
          <sbdl-resource-type-icon [type]="result.type"></sbdl-resource-type-icon>
          {{ result.type | resourceType }}
        </div>
        <h6>{{ result.properties.title }}</h6>
        <dynamic-html [content]="result.summary" class="summary"></dynamic-html>
        <div class="metadata emphasis-medium">
          <div class="bullet-row">
              <span *ngIf="result.properties.grades.length > 0">
                  <span [ngPlural]="result.properties.grades.length" >
                    <ng-template ngPluralCase="=1">Grade</ng-template>
                    <ng-template ngPluralCase="other">Grades</ng-template>
                  </span>
                  {{ result.properties.grades | join:{field: 'shortName', conjunction:'and'} }}
              </span>
              <span *ngIf="result.properties.subject">
                <span *ngIf="result.properties.grades.length > 0">&nbsp;&nbsp;&bull;&nbsp;&nbsp;</span>
                {{ result.properties.subject.fullName }}
              </span>
              <span *ngIf="result.properties.claims.length === 1">
                &nbsp;&nbsp;&bull;&nbsp;&nbsp;
                Claim {{ result.properties.claims[0].number }}: {{ result.properties.claims[0].title }}
              </span>
              <span *ngIf="result.properties.claims.length > 1">
                &nbsp;&nbsp;&bull;&nbsp;&nbsp;
                Claims {{ result.properties.claims | join:{field: 'number', conjunction: 'and' } }}
              </span>
          </div>
          <div class="targets" *ngIf="result.properties.targets.length === 1">
            Target {{result.properties.targets[0].number}}: {{result.properties.targets[0].description}}
          </div>
          <div class="targets" *ngIf="result.properties.targets.length > 1">
            Targets {{ result.properties.targets | join:{field: 'number', conjunction: 'and'} }}
          </div>
          <div *ngIf="result.properties.standards.length === 1" class="standards">
            Standard {{ result.properties.standards[0].title}}
          </div>
          <div *ngIf="result.properties.standards.length > 1" class="standards">
            Standards {{ result.properties.standards | join:{field: 'title', conjunction: 'and '} }}
          </div>
        </div>
      </div>
      <img [src]="result.properties.image | replaceNullImage">
    </a>
  </section>
</article>

