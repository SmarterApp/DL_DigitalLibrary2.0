<ng-container [ngSwitch]="attachmentCardType">
  <div
    *ngSwitchCase="CardType.File"
    class="attachment-card file-attachment"
  >
    <div class="type-info">
      <span class="attachment-category">{{ attachment.category }}</span>
      <i class="{{attachment.fileType | fileTypeIcon }}" aria-hidden="true"></i>
    </div>
    <div class="detail-info">
      <span>
        {{ attachment.name }}
        <span class="emphasis-medium">(.{{attachment.fileExtension}})</span>
      </span>
      <div class="actions">
        <a
          *ngIf="canPreview(attachment.fileType)"
          href="javascript:void(0)"
          (click)="preview(attachment)"
        ><i class="far fa-eye" aria-hidden="true"></i> Preview</a>
        <a
          href="javascript:void(0)"
          (click)="download(attachment)"
        ><i class="far fa-cloud-download" aria-hidden="true"></i> Download</a>
      </div>
    </div>
  </div>
  <div
    *ngSwitchCase="CardType.Media"
    class="attachment-card media-attachment"
  >
    <div class="type-info">
      <span class="attachment-category">{{ attachment.category }}</span>
      <i class="{{attachment.fileType | fileTypeIcon }}" aria-hidden="true"></i>
    </div>
    <div class="detail-info">
      <span>
        {{ attachment.name }}
      </span>
      <div class="actions">
        <a
          href="javascript:void(0)"
          (click)="previewMedia = true"
          [hidden]="previewMedia"
        ><i class="far fa-eye" aria-hidden="true"></i> Watch</a>
      </div>
    </div>
    <div [ngSwitch]="attachment.fileType"
         [ngClass]="{ preview: previewMedia }"
         class="embedded-media-player">
      <ng-template [ngSwitchCase]='FileType.YouTubeLink'>
        <iframe
          *ngIf="previewMedia"
          [src]="embeddableUrl"
          class="youtube-player"
          frameborder="0"
          allow="accelerometer; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </ng-template>
      <ng-template [ngSwitchCase]='FileType.Audio'>
        <iframe
          *ngIf="previewMedia"
          [src]="embeddableUrl"
          class="audio-player"
          frameborder="0"
        ></iframe>
      </ng-template>
      <ng-template ngSwitchCaseDefault>
        <div class="unknown-media">
        </div>
      </ng-template>
      <sbdl-button class="plain" (click)="previewMedia=false">
        <i class="far fa-compress-alt" aria-hidden="true"></i> Close
      </sbdl-button>
    </div>
  </div>
  <div
    *ngSwitchCase="CardType.Link"
    class="attachment-card link-attachment"
  >
    <div class="type-info">
      <span class="attachment-category">{{ attachment.category }}</span>
      <i class="far fa-link" aria-hidden="true"></i>
    </div>
    <div class="detail-info">
      <span>
        {{ attachment.name }}
      </span>
      <div class="actions">
        <a
          target="_blank"
          href="{{ attachment.uri }}"
          attr.aria-label="{{ attachment.name }} (opens in a new window)"
        ><i class="far fa-external-link" aria-hidden="true"></i> Visit</a>
      </div>
    </div>
  </div>
</ng-container>
