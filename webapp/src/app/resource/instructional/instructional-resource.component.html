<header class="resource-header">
  <div class="top-header">
    <img src="/assets/images/yellow-spot.png" alt="" />
    <sbdl-actions
      [hasNotes]="notes.length > 0"
      [notesVisible]="notesVisible"
      [readingMode]="readingMode"
      [printingMode]="printingMode"
      [resource]="resource"
      (readingModeChanged)="readingModeChanged.emit($event)"
      (printingModeChanged)="printModeChanged.emit($event)"
      (notesVisibilityChanged)="noteModeChanged.emit($event)"
    ></sbdl-actions>
  </div>

  <sbdl-header
    [resource]="resource"
    (attachmentsClicked)="scrollToAttachments()"
  ></sbdl-header>
</header>
<nav class="outline">
  <sbdl-outline
    [resource]="resource"
    [outline]="outline"
    [readingMode]="readingMode"
    [hidden]="printingMode"
  ></sbdl-outline>
  <sbdl-enhanced-printing
    [resource]="resource"
    [outline]="outline"
    [hidden]="!printingMode"
    (printingModeChanged)="printModeChanged.emit($event)"
    (documentOutlineChanged)="setOutline($event)"
  ></sbdl-enhanced-printing>
</nav>
<main id="main" class="resource-content">
  <sbdl-instructional-content
    [notes]="notes"
    [notesVisible]="notesVisible"
    [printingMode]="printingMode"
    [readingMode]="readingMode"
    [outline]="outline"
    [resource]="resource"
    (outlineLoaded)="setOutline($event)"
    (readingModeChanged)="readingModeChanged.emit($event)"
    (printingModeChanged)="printModeChanged.emit($event)"
    (notesVisibilityChanged)="noteModeChanged.emit($event)"
  ></sbdl-instructional-content>
</main>
<aside class="resource-properties">
  <sbdl-resource-properties
    [properties]="resource.properties"
    [hidden]="notesVisible">
    <sbdl-educational-details [properties]="resource.properties"></sbdl-educational-details>

    <!-- playlist -->
    <div
      *ngIf="resource.listConnectionsPlaylists && resource.listConnectionsPlaylists.length > 0"
      class="playlists"
    >
      <h6>Playlists</h6>
      <div class="caption emphasis-medium">
        Connections playlists utilizing this resource.
      </div>
      <a
        *ngFor="let playlist of resource.listConnectionsPlaylists"
        class="playlist-card"
        [routerLink]="['/resource', playlist.id]"
      >
<!--        <sbdl-icon [icon]="playlist.assessmentTypeIcon" class="assessment-type-icon"></sbdl-icon>-->
        <div class="playlist-title">
          <div class="title">{{ playlist.title }}</div>
          <div class="resources" [ngPlural]="playlist.count" >
            <ng-template ngPluralCase="=1">{{ playlist.count }} resource</ng-template>
            <ng-template ngPluralCase="other">{{ playlist.count }} resources</ng-template>
          </div>
        </div>
        <sbdl-icon
          icon="playlist-play"
          class="playlist-icon"
        ></sbdl-icon>
      </a>
    </div>

  </sbdl-resource-properties>
  <sbdl-notes
    *ngIf="user"
    [hidden]="!notesVisible"
    [notes]="notes"
    [resource]="resource"
    (notesChanged)="notesChanged($event)">
  </sbdl-notes>
</aside>
